(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{33:function(e,t,a){e.exports=a(40)},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(21),l=a.n(r);a(38),a(39);function c(){return o.a.createElement("div",{style:{backgroundColor:"#15223b",padding:"10px",color:"white"}},"GAME OF LIFE",o.a.createElement("hr",null))}var s=a(5),i=a(8),g=a(41),y=a(44);function u(e){console.log(e);var t=function(t){var a={msgType:t.target.id,X:null,Y:null,playerColor:e.myColor,generation:99,playerID:"007",payload:t.target.id};console.log("sending",a),e.send(JSON.stringify(a))};return o.a.createElement("div",null,"GOL OPTIONS",o.a.createElement("br",null),o.a.createElement(g.a,{style:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between",flexWrap:"no-wrap",padding:"1rem"}},o.a.createElement(y.a,{variant:"primary",id:"PROPOGATE",onClick:t},"PROPOGATE"),o.a.createElement(y.a,{variant:"primary",id:"BLINKER",onClick:t},"BLINKER"),o.a.createElement(y.a,{variant:"primary",id:"TOAD",onClick:t},"TOAD"),o.a.createElement(y.a,{variant:"primary",id:"BEACON",onClick:t},"BEACON"),o.a.createElement(y.a,{variant:"primary",id:"ANNIHILATE",onClick:t},"ANNIHILATE")),o.a.createElement("hr",null))}var m=a(16);function d(e){var t=Object(n.useRef)(null);console.log(e);return Object(n.useEffect)((function(){if(e.boardData&&t.current){var a=m.a(t.current).append("svg").attr("width","510px").attr("height","510px");a.selectAll(".row").data(e.boardData).enter().append("g").attr("class","row").selectAll(".square").data((function(e){return e})).enter().append("rect").attr("class","square").attr("x",(function(e){return 50*e.x+1})).attr("y",(function(e){return 50*e.y+1})).attr("width",(function(e){return 50})).attr("height",(function(e){return 50})).style("fill","#fff").style("stroke","#222").on("click",(function(t){t.status=!0,function(t,a){console.log("clicked ->"),console.log("clicked =>",t,a,e.myColor);var n={msgType:"GOLMOVE",x:t,y:a,playerColor:e.myColor,generation:99,playerID:"007",payload:"INSTILL"};e.send(JSON.stringify(n))}(t.x,t.y),console.log("clicked"),!0===t.status&&m.a(this).style("fill","#0000ff")})).style("fill",(function(e){return e.colorHex?e.colorHex:"#fff"})),a.exit().remove()}}),[e.boardData,t.current]),o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.a.createElement("svg",{style:{height:"100vh",width:"100vw"},className:"board-component",ref:t})))}function f(e){var t=e.chatHistory.map((function(e,t){return o.a.createElement("li",{key:t},JSON.stringify(e))}));return o.a.createElement("div",{className:"ChatHistory",style:{height:"70vh",overflowY:"scroll"}},o.a.createElement("h2",null,"Chat History"),o.a.createElement("h3",null,e.header),o.a.createElement("ul",null,t))}function p(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],l=a[1];return o.a.createElement("div",null,o.a.createElement("div",{className:"ChatInput"},o.a.createElement("input",{onKeyDown:function(t){if(13===t.keyCode){var a={msgType:"GOLCHAT",X:"",Y:"",playerColor:e.myColor,generation:99,playerID:"007",payload:r};console.log("sending",a),e.send(JSON.stringify(a)),t.target.value="",console.log("clearing"),l("")}},onChange:function(e){l(e.target.value)},value:r})))}var E=a(42),h=a(43),v=new WebSocket("ws://localhost:8080/ws"),O=function(e){console.log("connecting"),v.onopen=function(){console.log("Successfully Connected")},v.onmessage=function(t){console.log(t),e(t)},v.onclose=function(e){console.log("Socket Closed Connection: ",e)},v.onerror=function(e){console.log("Socket Error: ",e)}},C=function(e){console.log("sending msg:: ",e),v.send(e)};function b(e,t){var a=Object(i.a)(t,2),n=a[0],o=a[1];switch(console.log("REDUCER",n),console.log("REDUCER-PAYLOAD",o),n){case"playerColor":return Object.assign({},e,{pending:e.pending,playerColor:o,messageHistory:{chat:e.messageHistory.chat,game:e.messageHistory.game,allHistory:[].concat(Object(s.a)(e.messageHistory.allHistory),[o])}});case"chat":return Object.assign({},e,{pending:e.pending,playerColor:e.playerColor,messageHistory:{chat:[].concat(Object(s.a)(e.messageHistory.chat),[o]),game:Object(s.a)(e.messageHistory.game),allHistory:[].concat(Object(s.a)(e.messageHistory.allHistory),[o])}});case"GOLGAME":return Object.assign({},e,{pending:e.pending,playerColor:e.playerColor,messageHistory:{chat:Object(s.a)(e.messageHistory.chat),game:[].concat(Object(s.a)(e.messageHistory.game),[o]),allHistory:[].concat(Object(s.a)(e.messageHistory.allHistory),[o])}});default:return e}}var H={playerColor:"",pending:0,messageHistory:{chat:[],game:[],allHistory:[]}};function w(){var e=Object(n.useReducer)(b,H),t=Object(i.a)(e,2),a=t[0],r=t[1];function l(e){console.log("sending...:",e),C(e)}return Object(n.useEffect)((function(){O((function(e){console.log("New Message"),console.log("received data:",typeof e.data,e.data);var t=JSON.parse(e.data);console.log("packet ->",t.type,t),console.log("body ->",typeof t.body,t.body),console.log("body ->",t.body.golMsgType,t.body.payload),r([t.body.golMsgType,t.body.payload])}))}),[]),console.log("STATE",a),o.a.createElement("div",null,o.a.createElement(E.a,null,o.a.createElement("hr",null),o.a.createElement(g.a,null,o.a.createElement(h.a,{sm:7},o.a.createElement(u,{send:l,myColor:a.playerColor}),a.messageHistory.game.length>=1?o.a.createElement(d,{boardData:a.messageHistory.game[a.messageHistory.game.length-1].board,myColor:a.playerColor,send:l}):null),o.a.createElement(h.a,{sm:5},o.a.createElement(f,{chatHistory:a.messageHistory.chat,header:"Chat Only"}),o.a.createElement(p,{send:l})))))}var k=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(c,null),o.a.createElement(w,null),o.a.createElement("hr",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.782ad53a.chunk.js.map